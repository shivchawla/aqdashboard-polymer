		

<link rel='import' href='../../../bower_components/google-chart/google-chart.html'>
<link rel='import' href='../../../bower_components/chart-elements/chart-elements.html'>
<link rel="import" href="../../../bower_components/vaadin-grid/vaadin-grid.html">
<link rel="import" href="./aq-community-postdetail-header.html">

<link rel="import" href="./aq-community-postdetail-content.html">
<link rel="import" href="./aq-community-postdetail-reply.html">

<dom-module id='aq-analyze-backtest-comparison-item'>	
	<style>	
		chart-line {
			width: 50%;
			height:30%;
		}

		chart-bar {
			width: 50%;
			height:30%;
		}

		aq-analyze-home-metric-item {
			height:50px;
		}

		.head span {
			--font-weight: bold;
			--margin-top: 20px;
			font-size: 18px;
		}

		.head {
			background-color: teal;
			text-align: center;
			height: 30px;
		}

		span {
			text-align: center;
			margin-top:15px;
		}
		.paper_align{
			position: absolute;
		    top: 20px;
		    right: 7px;
		}
		.pages_select{
			text-align: -webkit-center;
			margin: 30px 0 30px 10px;
		}
		vaadin-grid{
			--vaadin-grid-header-row-height : 78px;
			--vaadin-grid-row-cell: blue;
		}
		
		
		
		.axis_labels{
			position: absolute;
			top: 100px;
			left: 50%;
			text-align: left;
		}
		.sub_header{
			display: flex;justify-content: space-between;
		}
		.goBack__text{
			margin-left: 10px; margin-bottom: 30px;
		}
	</style>

	<template>
		
		<div class="goBackButton layout horizontal">
            <paper-icon-button noink class="self-center" title="Go Back" icon="icons:arrow-back" on-tap="goBack1"></paper-icon-button>
            <div class="flex"><h3>Back to Comparision</h3></div>
          </div>
		<div id='comparison-return'>

			<div class="sub_header">
				<h2 class="goBack__text">Compare Backtests Objects: </h2>
				<paper-tabs style="margin-top: 20px" noink selected={{graphType1}}>
				<template is='dom-if'' if="[[lineData]]">
					<paper-tab>Line Graph</paper-tab>
					</template>
					<template is='dom-if'' if="[[barData]]">
					<paper-tab>Bar Graph</paper-tab>
					</template>
					<paper-tab>Comparision Table</paper-tab>
				</paper-tabs>
			</div>
			<iron-ajax auto
				  id="axax_barGraph"
				  url=""
		          handle-as="json"
		          on-response="handleResponse1"
		          >
		          </iron-ajax>
			<iron-ajax auto
				  id="axax_lineGraph"
				  url=""
		          handle-as="json"
		          on-response="handleResponse"
		          >
		          </iron-ajax>
		          
			<iron-pages class="pages_select" selected={{graphType1}}>
		  		<iron-page>

				<nvd3-line 
		  			id="chart-line1" 
		  			class="bar1" 
		  			height=460
		  			width=900
		  			show-legend 
		  			use-interactive-guideline 
		  			auto-resize 
		  			no-data="No Data Available!" 
		  			data=[[lineData]]>
		  		</nvd3-line>
		  		<div class="axis_labels">
		  			<p><strong>X-Axis:</strong> {{x_lineData}}</p>
		  		<p><strong>Y-Axis:</strong> {{y_lineData}}</p>
		  		</div>
		  		</iron-page>
		  		<iron-page>

				<nvd3-multi-bar 
		  			id="chart-bar" 
		  			class="bar" 
		  			height=460
		  			width=900
		  			show-legend 
		  			use-interactive-guideline 
		  			auto-resize 
		  			no-data="No Data Available!" 
		  			data=[[barData]]>
		  		</nvd3-multi-bar>
		  		<div class="axis_labels">
		  			<p><strong>X-Axis:</strong> {{x_barData}}</p>
		  			<p><strong>Y-Axis:</strong> {{y_barData}}</p>
		  		</div>
		  		</iron-page>
		  		<iron-page>
		  		<div style="width:100%">
		  		<vaadin-grid id="table_details__comparision" style="overflow: scroll;width: 100%">
				  <table>
				    <colgroup class="table_style">
				      <col name="Strategy Name" sortable/>
				      <col name="Total Return1" sortable/>
				      <col name="Avg Return" sortable/>
				      <col name="Avg Volatility" sortable/>
				      <col name="Sharpe Ratio" sortable/>
				      <col name="Information Ratio" sortable/>
				      <col name="Sortino Ratio" sortable/>
				      <col name="Avg Drawdown" sortable/>
				      <col name="Max Drawdown" sortable/>
				      <col name="Calmar Ratio" sortable/>
				      <col name="Beta Value" sortable/>
				      <col name="Stability" sortable/>
				      <col name="Avg Concentration" sortable/>
				    </colgroup>
				  </table>
				</vaadin-grid>
				</div>
				</iron-page>
	  		</iron-pages>
		</div>
		
		<div id='comparison-risk' class = "layout horizontal flex">
			<iron-ajax auto url="../common/data.json"
	          handle-as="json"
	          on-response="handleResponse_grid"
	          debounce-duration="300"></iron-ajax>			
		</div>	
			
	</template>
	<script>
		Polymer ({
			is:'aq-analyze-backtest-comparison-item',
			
			properties:{
				graphType1: {
					type:Number,
					value:1,
				},
				barData: {
					type: Object,
				},
				lineData: {
					type: Object,
				},
				x_lineData:{
					type: String,
				},
				x_barData:{
					type: String,
				},
				y_lineData:{
					type: String,
				},
				y_barData:{
					type: String,
				},
				
			},
			ready: function(){
				var claims = [];
				claims.push({
		            'Total Return1': '14.3%',
		            'Avg. Return': '3.4%',
		            'Avg. Volatility': '5.6%',
		            'Sharpe Ratio': "0.82",
		            'Information Ratio': "0.5",
		            'Sortino Ratio': "1.6",
		            'Avg. Drawdown': "4.5%",
		            'Max. Drawdown': "5.6%",
		            'Calmar Ratio': "2.4",
		            'Beta': "0.98",
		            'Stability': "0.88",
		            'Avg. Concentration': "0.52"
		        });
		   //      	
		        	this.$.axax_lineGraph.url = "http://localhost:8080/src/components/common/data1.json";
					console.log(this.$.axax_lineGraph.url);
			        this.$.axax_lineGraph.generateRequest();
			        
		     //    setTimeout(function(){var grid = document.querySelector('#sort');
		     //    console.log('claims',claims);
		     //    console.log(grid);
		     //    grid.items = claims;
		    	// },6000);
			},
			handleResponse: function(e){

				this.set('lineData',e.detail.response);

				console.log(e.detail.response);

				this.$.axax_barGraph.url = "http://localhost:8080/src/components/common/data3.json";
				console.log(this.$.axax_barGraph.url);
		        this.$.axax_barGraph.generateRequest();
		        this.set('x_lineData', e.detail.response[0].x_axis);
		        this.set('y_lineData', e.detail.response[0].y_axis);


				

			},
			handleResponse1: function(e){

				this.set('barData',e.detail.response);
				console.log(this.barData);
				console.log('barData');
				this.set('x_barData', e.detail.response[0].x_axis);
		        this.set('y_barData', e.detail.response[0].y_axis);

				
				

			},
			goBack1() {
		          this.fire('backClicked_all');
		      },
			handleResponse_grid: function(e){
				var items1=[];
				var grid1 = this.$.table_details__comparision;

				var a = e.detail.response.result;
				console.log(e.detail.response.result.length);
				for(var i=0; i<e.detail.response.result.length;i++){
					items1.push({
			            'Strategy Name': e.detail.response.result[i].Strategy,

			            'Total Return1': e.detail.response.result[i].Total_Return1,
			            'Avg Return': e.detail.response.result[i].Avg_Return1,
			            'Avg Volatility': e.detail.response.result[i].Avg_Volatility,
			            'Sharpe Ratio': e.detail.response.result[i].Sharpe_Ratio,
			            'Information Ratio': e.detail.response.result[i].Information_Ratio,
			            'Sortino Ratio': e.detail.response.result[i].Sortino_Ratio,
			            'Avg Drawdown': e.detail.response.result[i].Avg_Drawdown,
			            'Max Drawdown': e.detail.response.result[i].Max_Drawdown,
			            'Calmar Ratio': e.detail.response.result[i].Calmar_Ratio,
			            'Beta Value': e.detail.response.result[i].Beta,
			            'Stability': e.detail.response.result[i].Stability,
			            'Avg Concentration': e.detail.response.result[i].Avg_Concentration

			        });
			        
			        console.log('items1');
				}
					grid1.items = items1;
					grid1.frozenColumns = 1;


			}
		});
	</script>
</dom-module>
