<link rel='import' href='../../../bower_components/iron-flex-layout/iron-flex-layout-classes.html'>
<link rel="import" href="../../../bower_components/paper-button/paper-button.html">

<link rel='import' href='../../icons/aq-iconset.html'>
<link rel="import" href="../common/aq-sub-toolbar.html">

<dom-module id='aq-analyze-home-menu'>
	<style  include="iron-flex iron-flex-alignment iron-positioning">
	</style>
    
    <style>
    	#menu-container {
    		margin-bottom: -5px;
    		color: #555555;
    	}

    	#header {
    		font-size: 18px;
    	}

		paper-tooltip.iconTooltip {
        	--paper-tooltip: {
          		font-size: 11px;
          		min-width: 40px;
          		text-align: center;
        	};

        	--paper-tooltip-opacity: 1.0;
			--paper-tooltip-background: teal;
		}

        paper-button {
        	color: #cc6666;
        	border: 1px solid #cc6666;
        	background-color: white;
        	height: 22px;
        	font-size: 14px;
        	text-transform: none;
        }

        paper-button[disabled] {
        	border: 1px solid lightgray;
    		color: lightgray;
    		background-color: white;
        }
        
        #expand_all{
            color:#cc6666;
            font-size: 13px;
            position: relative;
            top:2px;
        }

        .checkbox-all {
            --paper-checkbox-checked-color: #cc6666;
            margin-left: 10px;
        }

        .iconTooltip {
            --paper-tooltip: {
                font-size: 12px;
                min-width: 40px;
                text-align: center;
            };
            --paper-tooltip-opacity: 1.0;
            --paper-tooltip-background: teal;
        }
        
        paper-icon-button{
            --paper-icon-button:{
                color:#cc6666;
            };

            width:40px;
            height:40px;
        }

        iron-icon {
        	height: 17px;
        	width: 17px
        }

	</style>
	
	<template>
        <div id="menu-container" class="layout horizontal">
            <!--paper-icon-button noink id="backButton" icon="aq-icons:chevron-left" on-tap="goToEditor">
            </paper-icon-button-->

            <!--paper-checkbox noink class="checkbox-all" checked="{{checkAll}}"
                            on-change='onCheckAllBacktest'>
            </paper-checkbox-->

            <p id="header">All Backtests for <i>[[strategyName]]</i></p>
            <div class="flex"></div>
            <div id='menu-icons' class="layout horizontal">

        	 	<paper-button  id='compareButton' class="self-center" noink on-tap="onCompare" disabled="[[!isCompareActive(numActiveBacktests)]]">Compare
                </paper-button>
               
            	<paper-button  id='deleteButton' class="self-center" noink on-tap="onDelete" disabled="[[!isDeleteActive(numActiveBacktests)]]"><iron-icon icon="aq-icons:delete"></iron-icon>Delete Selected
                </paper-button>

                <template is='dom-if' if="[[!expand]]">
                	<paper-icon-button  id='foldMoreIcon' noink class="iconButton self-center" icon="aq-icons:unfold-more" on-tap="expandAll" ></paper-icon-button>

                	<paper-tooltip for='foldMoreIcon' offset="2" class='self-center iconTooltip' position="bottom" animation-delay="0" fit-to-visible-bounds>Show More</paper-tooltip>

                </template>

                <template is='dom-if' if="[[expand]]">
                	<paper-icon-button  id='foldLessIcon' noink class="iconButton self-center" icon="aq-icons:unfold-less" on-tap="expandAll" ></paper-icon-button>

                	 <paper-tooltip for='foldLessIcon' offset="2" class='self-center iconTooltip' position="bottom" animation-delay="0" fit-to-visible-bounds>Show Less</paper-tooltip>
       
                </template>

                
            </div>

        </div>

        <!--paper-tooltip for='backButton' offset="2" class=' self-center iconTooltip' position="bottom" animation-delay="0" fit-to-visible-bounds>Go Back</paper-tooltip>
        
  		<paper-tooltip for='compareIcon' offset="2" class=' self-center iconTooltip' position="bottom" animation-delay="0" fit-to-visible-bounds>Compare</paper-tooltip>
        		
    	<paper-tooltip for='deleteIcon' offset="2" class=' self-center iconTooltip' position="bottom" animation-delay="0" fit-to-visible-bounds>Delete</paper-tooltip-->
	</template>
	
	<script>
		Polymer ({
			is: 'aq-analyze-home-menu',

			properties: {
				strategyName:{
					type:String,
				},

				numActiveBacktests:{
					type:Number,
					value:0,
				},
                expand:{
				    type:Boolean,
                    value: false
                },
                checkAll:{
                    type:Boolean,
                    value:false
                }
			},

			isCompareActive: function(numActiveBacktests) {
				return numActiveBacktests > 1 && numActiveBacktests <=5;
			},

			isDeleteActive: function(numActiveBacktests) {
				return numActiveBacktests > 0;
			},

			isShareActive: function(numActiveBacktests) {
				return numActiveBacktests == 1;
			},

			onDelete: function() {
				this.fire('deleteClicked');
			},

			onCompare: function() {
				this.fire('compareClicked');
			},

			/*onShare: function() {
				this.fire('shareClicked');
			},*/

            goToEditor: function() {
            	this.fire('backClicked');
            },

            expandAll:function () {
        	    this.expand = !this.expand;
        	    this.fire('iron-signal',{name:'expand-backtest',data:{expand:this.expand}});
            },

		});
		
	</script>
</dom-module>
