
<link rel='import' href='../../../bower_components/paper-icon-button/paper-icon-button.html'>
<link rel='import' href='../../../bower_components/iron-flex-layout/iron-flex-layout-classes.html'>

<link rel='import' href='../../icons/aq-iconset.html'>
<link rel="import" href="../common/backtest/aq-backtest-detail-item.html">
<link rel="import" href="../common/aq-check-authentication.html">
<link rel="import" href="../common/aq-loading-progress.html">
<link rel="import" href="../common/aq-allpage-layout.html">

<dom-module id="aq-analyze-backtest-detail">
	
	<style  include="iron-flex iron-flex-alignment iron-positioning">
	</style>

	<template>
	 	<aq-check-authentication id='authItem'></aq-check-authentication>
	
    		<aq-loading-progress loading='{{loading}}'></aq-loading-progress>
		  	
	  	 	<template is='dom-if' if='{{!loading}}'>
			    <aq-allpage-layout header="Backtest Detail" current-path=[[currentPath]]>
			  		<div class="internal-content">
				      	<aq-backtest-detail-item loading="{{loading}}" backtest-id="[[backtestId]]" heading="[[heading]]"></aq-backtest-detail-item>

				      	<!--aq-forwardtest-detail-item loading="{{loading}}" backtest-id="[[backtestId]]" index="{{index}}"></aq-forward-detail-item-->
	      			</div>
      			</aq-allpage-layout>
      		</template>
	</template>

	<script>
		Polymer ({
			is:'aq-analyze-backtest-detail',
			
			properties:{
				strategyId:String,
				backtestId:String,

				routeData:Object,

				loading:{
					type:Boolean,
					value:false,
				},

				heading: String, 

				currentPath: {
					type: Array,
					value: ["Home", "Research", "All Strategies", "All Backtests", "Backtest Detail"]
				}
			},

			goBackAllBacktests: function() {
				this.fire('unsubscribe-data',{backtestId:this.backtestId});
				this.fire('rt-changed',{route:'/dashboard/analyze/' + this.strategyId});
			},

			attached: function() {
				console.log(this.heading);
				if(!this.$.authItem.checkHasToken()) {
         	 		this.fire('rt-changed',{route:'/user/signin'});
	          		return;
	          	} 
			},

		});
			
	</script>
			
</dom-module>


