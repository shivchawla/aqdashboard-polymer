
<link rel='import' href='../../../bower_components/paper-icon-button/paper-icon-button.html'>
<link rel='import' href='../../../bower_components/iron-flex-layout/iron-flex-layout-classes.html'>

<link rel='import' href='../../icons/aq-iconset.html'>
<link rel="import" href="../common/aq-backtest-detail-item.html">
<link rel="import" href="../common/aq-check-authentication.html">
<link rel="import" href="../common/aq-loading-progress.html">

<dom-module id="aq-analyze-detail">
	
	<style  include="iron-flex iron-flex-alignment iron-positioning">
	</style>

	<style>
		#container {
			width:98%;
			margin:0 auto;
		    margin-top: 0px;
		    color: #24293d; 
	  	}

		#backButton {
			margin:auto 0;
			outline: none !important;
            color:#cc4444;
            transform: scale(1.6,1.6);
		}
        p.self-center{
            padding: 0;
            margin: 0;
            font-size: 14px;
            color:#cc4444;
            position: relative;
            left: -5px;
        }
  	</style>

	<template>
	 	<aq-check-authentication id='authItem'></aq-check-authentication>
	
    		<aq-loading-progress loading='{{loading}}'></aq-loading-progress>
		  	
		  	<div id='container'>
			    <template is='dom-if' if='{{!loading}}'>
			    	<div class="goBackButton layout horizontal">
			            <paper-icon-button noink id='backButton' class="self-center" title="Go Back" icon="chevron-left" on-tap="goBackAllBacktests">
			            </paper-icon-button>
			            <p class="self-center">Back</p>
			      	</div>

			      	<aq-backtest-detail-item loading="{{loading}}" backtest-id="[[backtestId]]" index="{{index}}"></aq-backtest-detail-item>
		      	</template>
      		</div>
	</template>

	<script>
		Polymer ({
			is:'aq-analyze-detail',
			
			properties:{
				strategyId:String,
				backtestId:String,

				routeData:Object,

				loading:{
					type:Boolean,
					value:false,
				},
				index:{
					type:String
				}
			},

			goBackAllBacktests: function() {
				this.fire('unsubscribe-data',{backtestId:this.backtestId});
				this.fire('rt-changed',{route:'/dashboard/analyze/' + this.strategyId});
			},

			attached: function() {
				if(!this.$.authItem.checkHasToken()) {
         	 		this.fire('rt-changed',{route:'/user/signin'});
	          		return;
	          	} 
			},

		});
			
	</script>
			
</dom-module>


