<link rel='import' href='../../../bower_components/paper-menu-button/paper-menu-button.html'>
<link rel='import' href='../../../bower_components/paper-button/paper-button.html'>
<link rel='import' href='../../../bower_components/paper-item/paper-item.html'>
<link rel='import' href='../../../bower_components/paper-listbox/paper-listbox.html'>
<link rel='import' href='../../../bower_components/iron-flex-layout/iron-flex-layout-classes.html'>
<link rel='import' href='../../icons/aq-iconset.html'>

<dom-module id='aq-dropdown'>

	<style is="custom-style" include="iron-flex iron-flex-alignment iron-positioning">
	</style>
  
	<style>
		paper-menu-button {
			width: 100%;
			
			padding: 0px;
		}

		paper-button {	
			margin:0px;
			border-radius: 5px;	
			border: var(--dropdown-border, 1px solid #e5e5e5);
			width: var(--dropdown-width,100%);	
 			text-transform: none;
			font-weight: var(--dropdown-font-weight, normal);
			font-size: var(--dropdown-font-size,13px);
			height: var(--dropdown-height, 30px);
			background-color: var(--dropdown-background-color, white);
			height: var(--dropdown-height, 36px); 
		}

		paper-item {
			font-size: var(--dropdown-paper-menu-font-size, 13px);
			text-decoration: none;
			background-color: var(--dropdown-background-color, white);
		}

		paper-menu-button {	
			--paper-menu-button-dropdown: {
				width: var(--dropdown-width, 100%);
			}
		}
		
		paper-listbox {
			--paper-listbox-background-color:var(--dropdown-background-color, white);
			border-radius: 5px;
			--width: 100%;
		}

		
		
	</style>

	<template>
		<paper-menu-button vertical-offset=[[verticalOffset]] horizontal-offset=[[horizontalOffset]]>
    		<paper-button noink class="button flex dropdown-trigger self-center">
				<span class="flex" id="category">{{selectedCategory.value}}</span>
				<iron-icon icon="aq-icons:arrow-drop-down"></iron-icon>
    		</paper-button>
        	
			<paper-listbox class="dropdown-content" attr-for-selected='label' selected="{{selectedCategory}}">

				<template is='dom-repeat' items='{{options}}'>
					<paper-item label='{{item}}'>{{item.value}}</paper-item>
				</template>
			</paper-listbox>
		</paper-menu-button>
	</template>

	<script>

		Polymer ({
			is:'aq-dropdown',
			properties :{
				selectedCategory: {
					type:Object,
					observer: 'selectedIndexChanged',
				},
				options:{
					type:Array,
					observer:'optionsAdded',
				},

				defaultIndex :{
					type:Number,
					value:0,
				},
				verticalOffset: {
					type: Number,
					value: 40,
				},

				horizontalOffset :{
					type:Number,
					value:0,
				},
			},

			optionsAdded: function() {
				this.selectedCategory = this.options[this.defaultIndex];
			},

			selectedIndexChanged: function() {
				this.fire('dropdown-changed', {'index':this.selectedCategory.index});
			},

			getSelectedValue: function() {
				return this.selectedCategory.value;
			}

		});
	</script>
</dom-module>