<link rel="import" href="../../../bower_components/paper-toolbar/paper-toolbar.html">

<link rel='import' href='../../../bower_components/iron-flex-layout/iron-flex-layout-classes.html'>
<link rel='import' href='../../icons/aq-iconset.html'>
<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">

<dom-module id='aq-editor-toolbar'>
    <style include="iron-flex iron-flex-alignment iron-positioning"></style>

    <style>
        :host{
            font-family: 'Lato',sans-serif;
        }
        paper-icon-button {
            width: 35px;
            height: 35px;
            margin-right: 10px;
            min-width: 25px;
            max-width: 35px;
            color: teal;
        }

        paper-icon-button {
	        --paper-icon-button-hover: {
       	 		outline:1px solid;
	        };
        }

        paper-toolbar {
            --paper-toolbar-height: 40px;
            --paper-toolbar-width: 100px;
            --paper-toolbar-color: teal;
            --paper-toolbar-background: #f2f2f2;
            --border-right: 5px solid #24293d;
        }

        #strategyName, #box {
            height: 24px;
            outline: none;
            font-size: 12px;
            padding-left: 3px;
            font-weight: bolder;
        }

        .separator {
            border-left: teal solid 1px;
            opacity: .8;
            height: 25px;
            margin-right: 10px;

        }

        input {
            max-width: 250px;
            min-width: 150px;
            --width: 20%;
            --font-size: 15px;
            color: #24293d;
        }

        .toolbarIcon:active {
            padding: 10px;
        }

        .toolbarPlayIcon {
            /*border:1px solid;*/
            padding: 0px;
            height: 23px;
            width: 23px;
            color:teal;
        }

        .toolbarPlayIcon:active {
            padding: 3px;
        }

        paper-tabs {
            height: 35px;
        }

        .inputbox {
            margin-left: 10px;
            margin-right: 10px;
            @apply(--layout-horizontal);
        }

        .input-span {
            color: #24293d;
            font-weight: bold;
            font-size: 14px;
        }

        #box {
            max-width: 130px;
            font-weight: normal;
            --border: 1px solid black;
            min-width: 100px;

        }
        .strategy-name{
            font-size: 14px;
            margin-right:10px;
        }

      	#toggleIcon.green {
		    color: teal;
		    --paper-button:	{
    			width: 25px;
        	};

	  	}

	  	#toggleIcon.green[active] {
		    background-color: teal;
		    color: white;
		  }

    </style>

    <template>
        <paper-toolbar>
            <div id='toolbar' class="flex layout horizontal center">
                <paper-icon-button noink id='back-icon' class="flex toolbarIcon" icon="aq-icons:arrow-back"
                                   title="Go Back" on-tap='goBack'></paper-icon-button>
                <!--span class="strategy-name">Strategy Name</span-->
                <input class="flex" id='strategyName' value="[[strategyName]]" type="text">

                <div class="flex" style="max-width:5%"></div>
 
                <paper-icon-button 
                		noink 
                		class="flex toolbarIcon" 
                		icon="aq-icons:add" 
                		title="New Strategy"
                       on-tap='onCreate'>
                </paper-icon-button>

                <paper-icon-button 
                		noink 
                		class="flex toolbarIcon" 
                		icon="aq-icons:content-copy" 
                		title="Clone Strategy"
                        on-tap='onClone'>
                </paper-icon-button>

                <paper-icon-button 
                		noink 
                		class="flex toolbarIcon" 
                		icon="aq-icons:save" 
                		title="Save Strategy"
                        on-tap='onSave'>
                </paper-icon-button>

                <div class="separator"></div>

             	<paper-icon-button 
                		noink 
                		class="flex toolbarIcon" 
                		icon="aq-icons:code" 
                		title="Toggle Code/Design" 
                		on-tap='toggleDesign'>
        		</paper-icon-button>

              	<paper-icon-button noink 
              			class= "flex toolbarIcon" 
              			icon= "vaadin-icons:line-bar-chart"
                        title="Analyze all Backtests" on-tap='onAnalyze'>
                </paper-icon-button>

                <div class="separator"></div>

                <paper-icon-button 
                		id='runButton' 
                		noink 
                		class="flex self-center toolbarPlayIcon"
                        icon="aq-icons:play-arrow" title="Run Backtest" on-tap='onRun'></paper-icon-button>
               	

               	<div class="flex"></div>
               
                <paper-icon-button 
                		id='toggleIcon' 
            			noink 
            			class="flex self-center green" 
            			toggles
                        title="Toggle Menu" 
                        on-tap='toggleDrawer'
                        icon="vaadin-icons:split-h">
                </paper-icon-button>

                <!--<template is='dom-if' if="[[checkToggleCondition(isProgrammer, narrow)]]">-->
                    <!--&lt;!&ndash;<div class="flex"></div>&ndash;&gt;-->
                    <!--<paper-icon-button noink class="toolbarIcon" icon="vaadin-icons:split-h" title="Toggle-Left"-->
                                       <!--on-tap="toggleDrawer"></paper-icon-button>-->
                <!--</template>-->


            </div>
        </paper-toolbar>

    </template>

    <script>
        Polymer({
            is: 'aq-editor-toolbar',

            properties: {
                narrow: {
                    type: Boolean,
                },

                isProgrammer: {
                    type: Boolean,
                },

                strategyName: String,
                strategyDesc: String,
                strategyId: String,
            },

            closeAll: function () {
                this.fire('close-all');
            },

            openDrawer: function () {
                this.fire('open-drawer');
            },

            closeDrawer: function () {
                this.fire('close-drawer');
            },

            toggleDrawer: function () {
                this.fire('toggle-drawer');
            },

            toggleConsole: function () {
                this.fire('toggle-console');
            },

            toggleDesign: function () {
                this.fire('toggle-design');
            },

            goBack: function () {
                //this.onSave();
                this.fire('backClicked');
            },

            onAnalyze: function () {
                this.fire('analyzeClicked', {id: this.strategyId});
            },

            onSave: function () {
                this.strategyName = this.$.strategyName.value;
                this.fire('save-action', {name: this.strategyName});
            },

            onCreate: function () {
                this.fire('newClicked');
            },

            onClone: function () {
                this.fire('cloneClicked');
            },

            onRun: function () {
                this.strategyName = this.$.strategyName.value;
                this.fire('run-action', {name: this.strategyName});
            },

            checkToggleCondition: function (isProgrammer, narrow) {
                return isProgrammer && narrow;
            },

        });
    </script>
</dom-module>