<link rel='import' href='../../../bower_components/iron-flex-layout/iron-flex-layout-classes.html'>
<link rel="import" href="../../../bower_components/paper-toolbar/paper-toolbar.html">

<link rel="import" href="../../../bower_components/paper-icon-button/paper-icon-button.html">

<link rel='import' href='../../icons/aq-iconset.html'>
<link rel='import' href='../common/aq-check-authentication.html'>
<link rel="import" href="../../../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../common/aq-sub-toolbar.html">
<link rel="import" href="../../../bower_components/iron-icons/iron-icons.html">

<dom-module id='aq-editor-home-menu'>
    <style include="iron-flex iron-flex-alignment iron-positioning">
    </style>

    <style>
        
        .checkbox-all {
            --paper-checkbox-checked-color: #cc6666;
            margin-left: 45px;
        } 

        .iconTooltip {
            --paper-tooltip: {
                font-size: 13px;
                min-width: 40px;
                text-align: center;
            };
            --paper-tooltip-opacity: 1.0;
            --paper-tooltip-background: teal;
        }

        .iconButton {
            padding:5px;
            width:35px;
            margin-right: 5px;
            margin-left: 5px;
            color: #cc6666;
            --paper-icon-button-disabled: {
                color: #cacaca !important;
            };
            --paper-icon-button-disabled-text:grey;
        }

        paper-icon-button {
            --paper-icon-button:{
                color:#cc6666;
            };

            width:40px;
            height:40px;
        }

    </style>

    <template>
        <aq-check-authentication id='authItem'></aq-check-authentication>
        
        <aq-sub-toolbar>
            <paper-checkbox noink class="checkbox-all" checked="{{checkAll}}"
                            on-change='onCheckAllStrategies'></paper-checkbox>
            <p class="strategy-header">All Strategies</p>
            
            <div class="flex"></div>

            <div id='menu-icons'>
                <paper-icon-button id='newIcon' noink class="iconButton" icon="aq-icons:add" on-tap="createNew">
                </paper-icon-button>

                <paper-icon-button id='deleteIcon' noink class="iconButton" icon="aq-icons:delete" on-tap="onDelete" disabled="[[!activeDelete]]">
                </paper-icon-button>
            </div>
            
            <paper-tooltip for='newIcon' offset="2" class='iconTooltip' position="bottom" animation-delay="0" fit-to-visible-bounds>New</paper-tooltip>

            <paper-tooltip for='deleteIcon' offset="2" class='iconTooltip' position="bottom" animation-delay="0" fit-to-visible-bounds>Delete</paper-tooltip>

        </aq-sub-toolbar>
        
    </template>

    <script>
        Polymer({
            is: 'aq-editor-home-menu',

            properties: {
                activeDelete: {
                    type: Boolean,
                    value: false,
                },

                searchText: {
                    type: String,
                    value: "",
                },

                checkAll: {
                    type: Boolean,
                    value: false,
                    notify: true,
                }
            },
            
            toggle: function () {
                var d = this.$$('#search').style.display;
                if (d == 'block') {
                    this.$$('#search').style.display = 'none';
                    this.$$('#menu-icons').style.display = 'inline';
                } else {
                    if (!this.$.authItem.checkHasToken()) {
                        this.fire('rt-changed', {route: '/user/signin'});
                        return;
                    }

                    this.$$('#search').style.display = 'block';
                    this.$$('#searchbox').focus();
                    this.$$('#searchbox').value = "";
                    this.$$('#menu-icons').style.display = 'none';
                }
            },

            onDelete: function () {
                this.fire('deleteClicked');
            },

            createNew: function () {
                this.fire('newClicked');
            },

            onCompare: function () {
                this.fire('compareClicked');
            },

            onCheckAllStrategies: function () {
                this.checkAll = this.$$('paper-checkbox').checked;
                this.fire('iron-signal', {name: 'select-strategy', data: {checked: this.$$('paper-checkbox').checked}});
            },
            focusInputBox: function () {
                this.$$('#searchbox').focus();
            }

        });

    </script>
</dom-module>
