<link rel="import" href="../../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../../bower_components/paper-scroll-header-panel/paper-scroll-header-panel.html">
<link rel="import" href="../../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel='import' href='../../../bower_components/iron-flex-layout/iron-flex-layout-classes.html'>
<link rel="import" href="../../../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../../bower_components/iron-icons/maps-icons.html">
<link rel="import" href="../../../bower_components/marked-element/marked-element.html">

<link rel="import" href="../profile-img.html">

<dom-module id="aq-community-postdetail-content">
   <style>
    :host {
      display:block;
    }

    #author {
      --margin-top:40px;
      --margin-bottom: 15px;
      border-bottom: 1px solid;
    }

    #img {
      margin-right:10px;
      margin-bottom: 5px;
    }

    #author-desc {
      margin-bottom: 5px;
    }

    #post-content {
      margin-bottom:50px;
    }

  </style>
  <template>
    <div id='post-content'>
      <div id='author' class="layout horizontal">
        <profile-img id='img' letter="[[getinitials(item)]]" class="self-end"></profile-img>
         <div id='author-desc' class="layout vertical self-end">
            <a href$="{{authoraddress}}">
              <span id="author-name">{{item.user.firstName}} {{item.user.lastName}}</span>
            </a>
            <span id="date">{{item.updatedAt}}</span>
          </div>
      </div>
      <marked-element markdown="{{item.markdownText}}">
        <div class="markdown-html"></div>
      </marked-element>

    </div>

  </template>

  <script>
    Polymer ({
      is: 'aq-community-postdetail-content',
      properties :{
        url: String,
        item: Object,
        threadId: 'threadId',
        author: String,
        createdAt: String,
        postText: String,
      },
      ready: function() {
          var x = localStorage.getItem('my-app-storage');
          var user = JSON.parse(x).user;
          if (user.token) {
            this.header = {
              "aimsquant-token": user.token,
              "Content-Type": "application/json"};  
          }
          
      },

      getinitials(item) {
        return item.user.firstName[0] + item.user.lastName[0];
      },

    });

  </script>

</dom-module>
